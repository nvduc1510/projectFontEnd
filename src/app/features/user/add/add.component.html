<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <main>
		<div class="container">
            <app-header></app-header>
			<div class="content">
                <div>{{data.errors|json}}</div>
				<div class="content-main">
					<div class="row">
						<form class="c-form box-shadow was-validated" [formGroup]="data" (ngSubmit)="submit()">
							<ul>
								<li class="title">会員情報編集</li>
								<li class="box-err">
									<div class="box-err-content">Hiển thị lỗi chung lại đây</div>
								</li>
                                <!-- Textbox EmployeeLoginId----------------------------------------->
                                
                                <li class="form-group row d-flex">
                                    <label class="col-form-label col-sm-2"><i class="relative">カタカナ氏名:<span class="note-red">*</span></i></label>
                                    <div class="col-sm col-sm-10">
                                        <input type="text" class="form-control" formControlName="employeeLoginId" [ngClass]="{'is-invalid' : submitted && data.controls['employeeLoginId'].errors} ">
                                        <div *ngIf="f['employeeLoginId'].errors && ( f['employeeLoginId'].touched ||  f['employeeLoginId'].dirty )">
                                            <div class="invalid-feedback " >
                                                {{data.controls['employeeLoginId'].errors?.['params']}}
                                            </div>
                                        </div>
                                        
                                    </div>
                                </li>
								
                                <!-- Hiển thị danh sách department---------------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">グループ:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10">
										<select class="form-control" formControlName="departmentId">
                                            <option value="">選択してください</option>
											<option *ngFor="let de of listDepartment" [value]="de.departmentId">{{de.departmentName}}</option>
										</select>
                                        <div *ngIf="f['departmentId'].errors && ( f['departmentId'].touched ||  f['departmentId'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['departmentId'].errors?.['params']}}
                                            </div>
                                        </div>
									</div>

								</li>
                                <!-- Textbox employeeName------------------------------------------------>
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">氏名:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10">
                                        <input type="text" class="form-control" formControlName="employeeName">
                                        <div *ngIf="f['employeeName'].errors && ( f['employeeName'].touched ||  f['employeeName'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['employeeName'].errors?.['params']}}
                                            </div>
                                        </div>
                                    </div>
								</li>
                                <!-- Textbox employeeNameKana -------------------------------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">カタカナ氏名:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10">                                       
										<input type="text" class="form-control" formControlName="employeeNameKana">
                                        <div *ngIf="f['employeeNameKana'].errors && ( f['employeeNameKana'].touched ||  f['employeeNameKana'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['employeeNameKana'].errors?.['params']}}
                                            </div>
                                        </div>
									</div>
								</li>
                                <!-- Textbox employeeBirthDate---------------------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">生年月日:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10 d-flex">
										<div class="input-group date datepicker"  data-date-format="dd-mm-yyyy">                                       
											<input class="form-control"  #dp="bsDatepicker" bsDatepicker [bsValue]="bsValue" formControlName="employeeBirthDate" [bsConfig]="bsConfig" >
											<span class="input-group-addon"><i class="glyphicon glyphicon-calendar" ></i></span>
										</div>
                                        <div *ngIf="f['employeeBirthDate'].errors && ( f['employeeBirthDate'].touched ||  f['employeeBirthDate'].dirty )">
                                            <div class="invalid-feedbacks">
                                                {{data.controls['employeeBirthDate'].errors?.['params']}}
                                            </div>
                                        </div>
									</div>
								</li>
                                <!--Textbox employeeEmail------------------------------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">メールアドレス:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10">                                     
                                        <input type="text" class="form-control" formControlName="employeeEmail">
                                        <div *ngIf="f['employeeEmail'].errors && ( f['employeeEmail'].touched ||  f['employeeEmail'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['employeeEmail'].errors?.['params']}}
                                            </div>
                                        </div>
                                    </div>
								</li>
                                <!-- Textbox employeeTelePhone------------------------------------------------>
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">電話番号:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10">
                                        <input type="text" class="form-control" formControlName="employeeTelephone">
                                        <div *ngIf="f['employeeTelephone'].errors && ( f['employeeTelephone'].touched ||  f['employeeTelephone'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['employeeTelephone'].errors?.['params']}}
                                            </div>
                                        </div>
                                    </div>
								</li>
                                <!-- Textbox employeeLoginPassword-------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">パスワード:<span class="note-red">*</span></i></label>
									<div class="col-sm col-sm-10"> 
                                        <input type="text" class="form-control" formControlName="employeeLoginPassword">
                                        <div *ngIf="f['employeeLoginPassword'].errors && ( f['employeeLoginPassword'].touched ||  f['employeeLoginPassword'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.controls['employeeLoginPassword'].errors?.['params']}}
                                            </div>
                                        </div>
                                    </div>
								</li>
                                <!--Textbox employeeLoginPasswordConfirm  -------------------------------->
								<li class="form-group row d-flex">
									<label class="col-form-label col-sm-2"><i class="relative">パスワード（確認）:</i></label>
									<div class="col-sm col-sm-10">      
                                        <input type="text" class="form-control" formControlName="employeeLoginPasswordConfirm">
                                        <div *ngIf="data?.errors && ( f['employeeLoginPasswordConfirm'].touched ||  f['employeeLoginPasswordConfirm'].dirty )">
                                            <div class="invalid-feedback">
                                                {{data.errors?.['params']}}
                                            </div>
                                        </div>

                                    </div>
								</li>
								<li class="title mt-12"><a href="#!">日本語能力</a></li>

                                <!-- Phần certification của employee---------------------------------------------------------->
                                <div formGroupName="certifications">
                                    <!-- Hiển thị danh sách certification----------------------------------------------------->
                                    <!-- Textbox certificationId-------------------------------------------------->
                                    <li class="form-group row d-flex">
                                        <label class="col-form-label col-sm-2"><i class="relative">資格:</i></label>
                                        <div class="col-sm col-sm-10">
                                            <select class="form-control" formControlName="certificationId" (change)="onCertificationChange()">
                                                <option value="">選択してください</option>
                                                <option *ngFor="let ce of listCertification" [value]="ce.certificationId">{{ce.certificationName}}</option>
                                            </select>
                                        </div>
                                    </li>
                                <ng-container *ngIf="hadCertification; else nonCertification">

                                    <!-- Textbox certificationStartDate------------------------------------------>
                                    <li class="form-group row d-flex">
                                        <label class="col-form-label col-sm-2"><i class="relative">資格交付日:<span class="note-red">*</span></i></label>
                                        <div class="col-sm col-sm-10 d-flex">
                                            <div id="datepicker" class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                                                <input class="form-control" readonly="" bsDatepicker type="text" [bsConfig]="bsConfig" formControlName="certificationStartDate" />
                                                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            </div>
                                            <!-- <div *ngIf="data.value?.certifications?.certificationId?.['ValidEmployeeBirthDate'] && ( f['certificationStartDate'].touched ||  f['certificationStartDate'].dirty )">
                                                <div class="invalid-feedback">
                                                    lỗi
                                                </div>
                                            </div> -->
                                        </div>
                                    </li>
                                    <!-- Textbox certificationEndDate--------------------------------------------->
                                    <li class="form-group row d-flex">
                                        <label class="col-form-label col-sm-2"><i class="relative">失効日:<span class="note-red">*</span></i></label>
                                        <div class="col-sm col-sm-10 d-flex">
                                            <div class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                                                <input class="form-control" readonly="" bsDatepicker type="text" [bsConfig]="bsConfig" formControlName="certificationEndDate" />
                                                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
                                            </div>   
                                            <div *ngIf="data?.errors">
                                                <div class="invalid-feedback">
                                                    「失効日」は「資格交付日」より未来の日で入力してください。
                                                </div>
                                            </div>
                                            <div>
                                            </div>
                                        </div>
                                    </li>
                                    <!-- Textbox employeeCertificationScore-------------------------------------->
                                    <li class="form-group row d-flex">
                                        <label class="col-form-label col-sm-2"><i class="relative">点数:</i></label>
                                        <div class="col-sm col-sm-10">
                                            <input type="text" class="form-control" formControlName="" formControlName="employeeCertificationScore"> 
                                            <!-- && data.get('certifications.employeeCertificationScore')?.touched                                           -->
                                                <div *ngIf="data.get('certifications.employeeCertificationScore')?.errors">   
                                                    <!-- <div *ngIf="data.hasError("ValidScore")"> -->
                                                        <!-- <div class="invalid-feedback">
                                                            {{data.errors?.['params']}}
                                                            a
                                                        </div> -->
                                                    <!-- </div> -->
                                                    <!-- {{data.hasError("ValidScore")}} -->
                                                </div>
                                        </div>
                                    </li>
                                </ng-container>
                                    <li  class="form-group row d-flex">
                                        <div class="btn-group col-sm col-sm-10 ml">
                                            <button type="submit" class="btn btn-primary btn-sm">確認</button>
                                            <button type="button" class="btn btn-secondary btn-sm" routerLink="/user/list">戻る</button>
                                        </div>
                                    </li>
                                </div>
							</ul>
						</form>
					</div>
				</div>

			</div>
            <app-footer></app-footer>
		</div>
	</main>

    <ng-template #nonCertification>
        <li class="form-group row d-flex">
            <label class="col-form-label col-sm-2">資格交付日:</label>
            <div class="col-sm col-sm-10 d-flex">
                <div class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                <input class="form-control" readonly type="text" placeholder="yyyy/MM/dd" />
                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
        </div>
        </li>
        <li class="form-group row d-flex">
            <label class="col-form-label col-sm-2">失効日:</label>
            <div class="col-sm col-sm-10 d-flex">
            <div class="input-group date datepicker" data-date-format="dd-mm-yyyy">
                <input class="form-control" readonly type="text" placeholder="yyyy/MM/dd" />
                <span class="input-group-addon"><i class="glyphicon glyphicon-calendar"></i></span>
            </div>
        </div>
        </li>
        <li class="form-group row d-flex">
            <label class="col-form-label col-sm-2">点数:</label>
            <div class="col-sm col-sm-10">
            <input type="text" class="form-control" placeholder="点数" readonly />
        </div>
        </li>
    </ng-template>